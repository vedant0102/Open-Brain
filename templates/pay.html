{% load static %}
<html>
  <head>
    <title>Buy cool new product</title>
  </head>
  <body>
<div>
       <h1 class="display-3">The Product</h1>
        <p class="lead">Choose a subscription Plan</p>


        <a href="#" id="buy_now_btn" class="btn btn-primary">Buy Now at 30$</a>

    <a href="#" id="buy_now_btn2" class="btn btn-primary">Buy Now at 60$</a>

</div>


  <script src="https://js.stripe.com/v3/"></script>

    <script>
       const buy_now_button = document.querySelector('#buy_now_btn')
        buy_now_button.addEventListener('click', event => {

            fetch('/checkout/')
            .then((result) => {return result.json()})
            .then((data) => {
                var stripe = Stripe(data.stripe_public_key);

                stripe.redirectToCheckout({
                // Make the id field from the Checkout Session creation API response
                // available to this file, so you can provide it as parameter here
                // instead of the {{CHECKOUT_SESSION_ID}} placeholder.
                  sessionId: data.session_id
                }).then(function (result) {
                  // If `redirectToCheckout` fails due to a browser or network
                  // error, display the localized error message to your customer
                  // using `result.error.message`.
                });
            })
        })



       const buy_now_button2 = document.querySelector('#buy_now_btn2')
        buy_now_button2.addEventListener('click', event => {

            fetch('/checkout2/')
            .then((result) => {return result.json()})
            .then((data) => {
                var stripe = Stripe(data.stripe_public_key);

                stripe.redirectToCheckout({
                // Make the id field from the Checkout Session creation API response
                // available to this file, so you can provide it as parameter here
                // instead of the {{CHECKOUT_SESSION_ID}} placeholder.
                  sessionId: data.session_id
                }).then(function (result) {
                  // If `redirectToCheckout` fails due to a browser or network
                  // error, display the localized error message to your customer
                  // using `result.error.message`.
                });
            })
        })





    </script>
  </body>

</html>